---
- name: OC System test
  hosts: localhost
  gather_facts: no
  vars:
    service_instance_name: "hq-rtr1"
    content: "{{ lookup('file', './config_system_RESTCONF.yml') }}"
  tasks:
  - set_fact:
      configs: "{{ content | from_yaml | to_json }}"
  - debug:
      msg: "{{ configs }}"
  - name: OC System test
    uri:
      url: "http://X.X.X.X:8080/restconf/data/oc-system-nso:oc-system-nso={{ service_instance_name }}"
      url_username: admin
      url_password: admin
      force_basic_auth: yes
      validate_certs: no
      status_code: [200,204]
      method: PUT
      headers: "{
        'Content-Type': 'application/yang-data+json',
        'Accept': 'application/yang-data+json'}"
      body_format: json
      body: "{{ configs }}"
