---
- name: OC System test
  hosts: localhost
  gather_facts: no
  tasks:
    - name: OC System test
      cisco.nso.nso_config:
        url: http://X.X.X.X:8080/jsonrpc
        username: admin
        password: admin
        data:
          oc-system-nso:oc-system-nso:
            - name: hq-rtr1
              device: hq-rtr1
              openconfig-system:
                system:
                  clock:
                    config:
                      timezone-name: 'EDT -4 0'
                  config:
                    domain-name: 'www.cisco.com'
                    hostname: 'hq-rtr1'
                    login-banner: |
                      This is line 1.
                      This is line 2.
                      This is the last line.
                    motd-banner: |
                      This is line 1.
                      This is line 2.
                      This is the last line.
                  dns:
                    servers:
                      server:
                        - address: '8.8.8.8'
                          config:
                            address: '8.8.8.8'
                            port: '53'  # always 53 for ios
                        - address: '8.8.4.4'
                          config:
                            address: '8.8.4.4'
                            port: '53'  # always 53 for ios
                  ntp:
                    config:
                      enabled: true  # true or false - removes or adds ntp servers
                      ntp-source-address: '172.16.255.1'
                    ntp-keys:
                      ntp-key:
                        - config:
                            key-id: '1'
                            key-type: 'NTP_AUTH_MD5'  # This must be NTP_AUTH_MD5
                            key-value: 'password123'
                          key-id: '1'
                    servers:
                      server:
                        - address: '10.0.0.1'
                          config:
                            address: '10.0.0.1'
                            association-type: SERVER  # SERVER, PEER, POOL
                            iburst: true
                            port: '123'  # always 123 for ios
                            prefer: false
                            version: '4'
