---
- hosts: localhost
  gather_facts: no
  environment:
    NSO_DEVICE: xe1
  vars:
    device: "{{ lookup('env', 'TEST_DEVICE_XEROUTER') | default('xe1', True) }}"
  tasks:
    - name: Run XE network instance OSPF area tests
      include_role:
        name: ned-to-oc-test
      vars:
        script_path: ../../../package_nso_to_oc/xe/xe_network_instances.py
        api_test_data:
          - name: Set up OC service config
            tags:
              - oc_set_up
            api_path: mdd:openconfig
            api_method: PUT
            content: |
              mdd:openconfig:
                openconfig-interfaces:interfaces:
                  openconfig-interfaces:interface:
                    - openconfig-interfaces:name: 'Loopback10'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'Loopback10'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'softwareLoopback'
                        openconfig-interfaces:description: 'Test loopback'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.255.10.1'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.255.10.1'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'Loopback100'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'Loopback100'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'softwareLoopback'
                        openconfig-interfaces:description: 'Test loopback'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.255.100.1'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.255.100.1'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'GigabitEthernet7'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'GigabitEthernet7'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'ethernetCsmacd'
                        openconfig-interfaces:description: 'Test gigabitethernet'
                      openconfig-if-ethernet:ethernet:
                        openconfig-if-ethernet:config:
                          openconfig-if-ethernet:auto-negotiate: true
                          openconfig-if-ethernet:enable-flow-control: false
                      openconfig-interfaces:hold-time:
                        openconfig-interfaces:config:
                          openconfig-interfaces:down: '10'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.250.20.1'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.250.20.1'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'GigabitEthernet3'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'GigabitEthernet3'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'ethernetCsmacd'
                        openconfig-interfaces:description: 'Test gigabitethernet'
                      openconfig-if-ethernet:ethernet:
                        openconfig-if-ethernet:config:
                          openconfig-if-ethernet:auto-negotiate: true
                          openconfig-if-ethernet:enable-flow-control: false
                      openconfig-interfaces:hold-time:
                        openconfig-interfaces:config:
                          openconfig-interfaces:down: '10'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.3.0.2'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.3.0.2'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'GigabitEthernet5'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'GigabitEthernet5'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'ethernetCsmacd'
                        openconfig-interfaces:description: 'Test gigabitethernet'
                      openconfig-if-ethernet:ethernet:
                        openconfig-if-ethernet:config:
                          openconfig-if-ethernet:auto-negotiate: true
                          openconfig-if-ethernet:enable-flow-control: false
                      openconfig-interfaces:hold-time:
                        openconfig-interfaces:config:
                          openconfig-interfaces:down: '10'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.5.0.2'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.5.0.2'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'GigabitEthernet6'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'GigabitEthernet6'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'ethernetCsmacd'
                        openconfig-interfaces:description: 'Test gigabitethernet'
                      openconfig-if-ethernet:ethernet:
                        openconfig-if-ethernet:config:
                          openconfig-if-ethernet:auto-negotiate: true
                          openconfig-if-ethernet:enable-flow-control: false
                      openconfig-interfaces:hold-time:
                        openconfig-interfaces:config:
                          openconfig-interfaces:down: '10'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.6.0.1'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.6.0.1'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'GigabitEthernet8'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'GigabitEthernet8'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'ethernetCsmacd'
                        openconfig-interfaces:description: 'Test gigabitethernet'
                      openconfig-if-ethernet:ethernet:
                        openconfig-if-ethernet:config:
                          openconfig-if-ethernet:auto-negotiate: true
                          openconfig-if-ethernet:enable-flow-control: false
                      openconfig-interfaces:hold-time:
                        openconfig-interfaces:config:
                          openconfig-interfaces:down: '10'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.250.25.1'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.250.25.1'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                          - openconfig-interfaces:index: 10
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 10
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.8.10.2'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.8.10.2'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'Tunnel1'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'Tunnel1'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'tunnel'
                        openconfig-interfaces:mtu: 1476
                        openconfig-interfaces:description: 'Test tunnel'
                      openconfig-if-tunnel:tunnel:
                        openconfig-if-tunnel:config:
                          openconfig-if-tunnel:src: '10.255.0.1'
                          openconfig-if-tunnel:dst: '192.168.172.1'
                          openconfig-if-tunnel:gre-key: 1
                          openconfig-if-tunnel-ext:keepalives:
                            openconfig-if-tunnel-ext:period: 5
                            openconfig-if-tunnel-ext:retries: 3
                      openconfig-interfaces:hold-time:
                        openconfig-interfaces:config:
                          openconfig-interfaces:down: '10'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '10.254.0.1'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '10.254.0.1'
                                      openconfig-if-ip:prefix-length: 24
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'vasileft1'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'vasileft1'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'vasi'
                        openconfig-interfaces:description: 'Test vasi'
                      openconfig-interfaces:hold-time:
                        openconfig-interfaces:config:
                          openconfig-interfaces:down: '10'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '192.168.1.1'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '192.168.1.1'
                                      openconfig-if-ip:prefix-length: 30
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                    - openconfig-interfaces:name: 'vasiright1'
                      openconfig-interfaces:config:
                        openconfig-interfaces:name: 'vasiright1'
                        openconfig-interfaces:enabled: true
                        openconfig-interfaces:type: 'vasi'
                        openconfig-interfaces:description: 'Test vasi'
                      openconfig-interfaces:hold-time:
                        openconfig-interfaces:config:
                          openconfig-interfaces:down: '10'
                      openconfig-interfaces:subinterfaces:
                        openconfig-interfaces:subinterface:
                          - openconfig-interfaces:index: 0
                            openconfig-interfaces:config:
                              openconfig-interfaces:index: 0
                            openconfig-if-ip:ipv4:
                              openconfig-if-ip:addresses:
                                openconfig-if-ip:address:
                                  - openconfig-if-ip:ip: '192.168.2.2'
                                    openconfig-if-ip:config:
                                      openconfig-if-ip:ip: '192.168.2.2'
                                      openconfig-if-ip:prefix-length: 30
                              openconfig-if-ip:config:
                                openconfig-if-ip:dhcp-client: false
                openconfig-routing-policy:routing-policy:
                  openconfig-routing-policy:defined-sets:
                    openconfig-routing-policy:prefix-sets:
                      openconfig-routing-policy:prefix-set:
                        - openconfig-routing-policy:name: 'prefix_test'
                          openconfig-routing-policy:config:
                            openconfig-routing-policy:name: 'prefix_test'
                            openconfig-routing-policy:mode: 'IPV4'
                          openconfig-routing-policy:prefixes:
                            openconfig-routing-policy:prefix:
                              - openconfig-routing-policy:ip-prefix: '10.0.0.0/24'
                                openconfig-routing-policy:masklength-range: 'exact'
                                openconfig-routing-policy:config:
                                  openconfig-routing-policy:ip-prefix: '10.0.0.0/24'
                                  openconfig-routing-policy:masklength-range: 'exact'
                                  openconfig-routing-policy-ext:seq: 10
                              - openconfig-routing-policy:ip-prefix: '10.0.0.0/23'
                                openconfig-routing-policy:masklength-range: '24..30'
                                openconfig-routing-policy:config:
                                  openconfig-routing-policy:ip-prefix: '10.0.0.0/23'
                                  openconfig-routing-policy:masklength-range: '24..30'
                                  openconfig-routing-policy-ext:seq: 20
                  openconfig-routing-policy:policy-definitions:
                    openconfig-routing-policy:policy-definition:
                      - openconfig-routing-policy:name: 'TEST'
                        openconfig-routing-policy:config:
                          openconfig-routing-policy:name: 'TEST'
                        openconfig-routing-policy:statements:
                          openconfig-routing-policy:statement:
                            - openconfig-routing-policy:name: '10'
                              openconfig-routing-policy:config:
                                openconfig-routing-policy:name: '10'
                              openconfig-routing-policy:actions:
                                openconfig-routing-policy:config:
                                  openconfig-routing-policy:policy-result: 'ACCEPT_ROUTE'
                      - openconfig-routing-policy:name: 'test'
                        openconfig-routing-policy:config:
                          openconfig-routing-policy:name: 'test'
                        openconfig-routing-policy:statements:
                          openconfig-routing-policy:statement:
                            - openconfig-routing-policy:name: '10'
                              openconfig-routing-policy:config:
                                openconfig-routing-policy:name: '10'
                              openconfig-routing-policy:actions:
                                openconfig-routing-policy:config:
                                  openconfig-routing-policy:policy-result: 'ACCEPT_ROUTE'
                              openconfig-routing-policy:conditions:
                                openconfig-routing-policy:match-prefix-set:
                                  openconfig-routing-policy:config:
                                    openconfig-routing-policy:prefix-set: 'prefix_test'
                                    openconfig-routing-policy:match-set-options: 'ANY'
                openconfig-network-instance:network-instances:
                  openconfig-network-instance:network-instance:
                    - openconfig-network-instance:name: 'default'
                      openconfig-network-instance:config:
                        openconfig-network-instance:name: 'default'
                        openconfig-network-instance:type: 'DEFAULT_INSTANCE'
                        openconfig-network-instance:enabled: true
          # - name: NED init OSPF
          #   tags:
          #     - init_ospf
          #   api_path: config/tailf-ned-cisco-ios:router/ospf
          #   api_method: PATCH
          #   content: |
          #     ospf:
          #       - id: '2'
          #       - id: '100'
          - name: NED init VRF
            tags:
              - init_vrf
            api_path: config/tailf-ned-cisco-ios:vrf/definition
            api_method: PATCH
            content: |
              definition:
                - name: 'internal_0'
                  address-family:
                    ipv4: {}
                    ipv6: {}
          - name: NED init interface
            tags:
              - init_intf
            api_path: config/tailf-ned-cisco-ios:interface
            api_method: PATCH
            content: |
              interface:
                Loopback:
                  - name: '10'
                    vrf:
                      forwarding: 'internal_0'
                    ip:
                      address:
                        primary:
                          address: 10.255.10.1
                          mask: 255.255.255.255
                  - name: 100
                    ip:
                      address:
                        primary:
                          address: 10.255.100.1
                          mask: 255.255.255.255
                GigabitEthernet:
                  - name: '5'
                    description: 'Description for GigabitEthernet5'
                    ip:
                      address:
                        primary:
                          address: '10.5.0.2'
                          mask: '255.255.255.0'
                  - name: '6'
                    description: 'Description for GigabitEthernet6'
                    ip:
                      address:
                        primary:
                          address: '10.6.0.1'
                          mask: '255.255.255.0'
                  - name: '8.10'
                    description: TESTDESCRIPT
                    encapsulation:
                      dot1Q:
                        vlan-id: 10
                    ip:
                      address:
                        primary:
                          address: '10.8.10.2'
                          mask: 255.255.255.0
                  - name: '7'
                    vrf:
                      forwarding: 'internal_0'
                    description: 'Description for GigabitEthernet7'
                    negotiation:
                      auto: True
                    mop:
                      xenabled: False
                      sysid: False
                    ip:
                      address:
                        primary:
                          address: '10.250.20.1'
                          mask: '255.255.255.0'
                      ospf:
                        network: 
                          - 'non-broadcast'
                        dead-interval:
                          seconds: 60
                        hello-interval: 15
                        retransmit-interval: 10
                        bfd: {}
                        cost: 10
                        priority: 10
                        authentication:
                          message-digest: ''
                        message-digest-key: 
                          - id: '1'
                            md5:
                              type: '0'
                              secret: 'pass1'
                          - id: '2'
                            md5:
                              type: '7'
                              secret: '140713181F56'
                      policy:
                        route-map: 'TEST'
                    shutdown: []
                    carrier-delay:
                      msec: 10
                  - name: '8'
                    vrf:
                      forwarding: 'internal_0'
                    description: 'Description for GigabitEthernet8'
                    negotiation:
                      auto: True
                    mop:
                      xenabled: False
                      sysid: False
                    ip:
                      address:
                        primary:
                          address: '10.250.25.1'
                          mask: '255.255.255.0'
                      ospf:
                        network: 
                          - 'non-broadcast'
                        dead-interval:
                          seconds: 60
                        hello-interval: 15
                        retransmit-interval: 10
                        bfd: {}
                        cost: 10
                        priority: 10
                        authentication:
                          null: ''
                      policy:
                        route-map: 'TEST'
                    shutdown: []
                    carrier-delay:
                      msec: 10
          - name: NED configure global config
            tags:
              - ospf_global_config
            api_path: config/tailf-ned-cisco-ios:router/ospf
            api_method: PATCH
            content: |
              ospf:
                - id: '2'
                  vrf: 'internal_0'
                  area:
                    - id: '1'
                      stub:
                        no-summary: {}
                    - id: '4'
                      filter-list:
                        - direction: 'in'
                          prefix: 'test'
                      # Getting error: "Area is configured as NSSA already"
                      nssa:
                        default-information-originate: {}
                        no-summary: {}
                    - id: '5'
                      filter-list:
                        - direction: 'in'
                          prefix: 'test'
                      # Getting error: "Virtual links are not allowed in NSSA and stub areas"
                      virtual-link:
                        - id: '10.200.200.200'
                  passive-interface:
                    interface:
                      - name: 'GigabitEthernet7'
                  network:
                    - ip: '10.250.0.0'
                      mask: '0.0.255.255'
                      area: '4'
                    - ip: '10.250.25.0'
                      mask: '0.0.0.255'
                      area: '5'
                    - ip: '0.0.0.0'
                      mask: '255.255.255.255'
                      area: '0'
                  mpls:
                    traffic-eng:
                      area: ['4']
                  neighbor:
                    ip: '10.10.10.10'
                    cost-database-filter-container:
                      cost: 100
                  redistribute:
                    bgp:
                      as-no: 1
                      route-map: test
                - id: '100'
                  area:
                    - id: '1'
                      filter-list:
                        - direction: 'in'
                          prefix: 'test'
                  network:
                    - ip: '10.255.100.1'
                      mask: '0.0.0.0'
                      area: '1'
                    - ip: '0.0.0.0'
                      mask: '255.255.255.255'
                      area: '0'
          - name: NED configure static route
            tags:
              - static_route_config
            api_path: config/tailf-ned-cisco-ios:ip/route
            api_method: PATCH
            content: |
              route:
                ip-route-interface-forwarding-list:
                  - prefix: '101.0.0.0'
                    mask: '255.0.0.0'
                    interface: 'GigabitEthernet5'
                    forwarding-address: '199.10.0.1'
                ip-route-interface-list:
                  - prefix: '102.0.0.0'
                    mask: '255.0.0.0'
                    interface: 'Null0'
                    tag: '179'
                    metric: 200
                    name: 'to_bgp'
                  - prefix: '103.0.0.0'
                    mask: '255.0.0.0'
                    interface: 'dhcp'
                  - prefix: '104.0.0.0'
                    mask: '255.0.0.0'
                    interface: 'GigabitEthernet6'
                  - prefix: '105.0.0.0'
                    mask: '255.0.0.0'
                    interface: 'GigabitEthernet8.10'
                ip-route-forwarding-list:
                  - prefix: '100.0.0.0'
                    mask: '255.0.0.0'
                    forwarding-address: '1.1.1.1'
                vrf:
                  - name: 'internal_0'
                    ip-route-interface-list:
                      - prefix: '70.0.0.0'
                        mask: '255.0.0.0'
                        interface: 'Null0'
                        tag: '179'
                        metric: 200
                        name: 'vrf_to_bgp'
        assertions:
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][0]['interfaces']['interface'][0]['config']['id'] == 'Loopback10'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][0]['interfaces']['interface'][0]['config']['passive'] == false"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][1]['openconfig-ospfv2-ext:stub-options']['totally-stubby']['config']['enabled'] == true"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['config']['id'] == 'GigabitEthernet7'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['config']['passive'] == true"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['config']['metric'] == 10"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['config']['network-type'] == 'openconfig-ospf-types:NON_BROADCAST_NETWORK'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['openconfig-ospfv2-ext:stub-options']['nssa']['config']['no-summary'] == true"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][3]['virtual-links']['virtual-link'][0]['config']['remote-router-id'] == '10.200.200.200'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['config']['passive'] == true"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['neighbors']['neighbor'][0]['router-id'] == '10.10.10.10'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['neighbors']['neighbor'][0]['config']['metric'] == 100"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['mpls']['config']['traffic-engineering-enabled'] == true"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['openconfig-ospfv2-ext:authentication']['config']['authentication-type'] == 'MD5'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][3]['interfaces']['interface'][0]['openconfig-ospfv2-ext:authentication']['config']['authentication-type'] == 'NULL'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['openconfig-ospfv2-ext:authentication']['md5-authentication-keys']['md5-authentication-key'][0]['config']['key-id'] == 1"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['openconfig-ospfv2-ext:authentication']['md5-authentication-keys']['md5-authentication-key'][0]['config']['key'] == 'pass1'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['openconfig-ospfv2-ext:authentication']['md5-authentication-keys']['md5-authentication-key'][1]['config']['key-id'] == 2"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['areas']['area'][2]['interfaces']['interface'][0]['openconfig-ospfv2-ext:authentication']['md5-authentication-keys']['md5-authentication-key'][1]['config']['key'] == '140713181F56'"
          # This is testing for globals, but areas are required, so we test that portion of globals here.
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['global']['inter-area-propagation-policies']['inter-area-propagation-policy'][0]['src-area'] == 0"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['global']['inter-area-propagation-policies']['inter-area-propagation-policy'][0]['dst-area'] == 4"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['global']['inter-area-propagation-policies']['inter-area-propagation-policy'][0]['config']['src-area'] == 0"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['global']['inter-area-propagation-policies']['inter-area-propagation-policy'][0]['config']['dst-area'] == 4"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['protocols']['protocol'][0]['ospfv2']['global']['inter-area-propagation-policies']['inter-area-propagation-policy'][0]['config']['import-policy'][0] == 'test'"
          # OSPF Redistribute
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['table-connections']['table-connection'][0]['config']['src-protocol'] == 'openconfig-policy-types:BGP'"
          - "oc_result.json['mdd:openconfig']['openconfig-network-instance:network-instances']['network-instance'][1]['table-connections']['table-connection'][0]['config']['openconfig-network-instance-ext:src-protocol-process-number'] == 1"
